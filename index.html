<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year Celebration</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            background-color: #f9fafb;
        }
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
        .font-handwriting {
            font-family: 'Courier New', cursive;
        }
        
        /* Night Theme Background */
        .night-sky {
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            color: white;
        }

        /* Animations */
        @keyframes swing {
            0% { transform: rotate(0.5deg); }
            50% { transform: rotate(-0.5deg); }
            100% { transform: rotate(0.5deg); }
        }
        .animate-swing {
            animation: swing 5s ease-in-out infinite;
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(0.9); }
        }
        .animate-flicker {
            animation: flicker 0.5s infinite;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
        .animate-wiggle {
            animation: wiggle 1s ease-in-out infinite;
        }

        @keyframes fly {
            0% { transform: translate(0, 0) scale(var(--scale)) rotate(0deg); }
            25% { transform: translate(calc(var(--xDir) * 0.2), -25vh) scale(var(--scale)) rotate(var(--rot)); }
            50% { transform: translate(calc(var(--xDir) * -0.2), -50vh) scale(var(--scale)) rotate(calc(var(--rot) * -1)); }
            75% { transform: translate(calc(var(--xDir) * 0.5), -75vh) scale(var(--scale)) rotate(var(--rot)); }
            100% { transform: translate(var(--xDir), -110vh) scale(var(--scale)) rotate(0deg); }
        }
        .balloon-fly {
            animation: fly var(--duration) linear forwards;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .curtain-panel {
            transition: transform 1.5s ease-in-out;
        }

        .particle {
            position: fixed;
            pointer-events: none;
            z-index: 50;
            border-radius: 2px;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Audio Element -->
    <audio id="bgMusic" loop>
        <source src="https://ia800304.us.archive.org/29/items/AuldLangSyne_255/Auld_Lang_Syne.mp3" type="audio/mpeg">
    </audio>

    <!-- STAGE 1: LANDING PAGE (Night Theme) -->
    <div id="view-landing" class="flex flex-col items-center justify-center min-h-screen night-sky text-center px-4 relative overflow-hidden">
        
        <!-- Canvas for Fireworks -->
        <canvas id="fireworksCanvas" class="absolute inset-0 pointer-events-none z-0"></canvas>

        <div class="relative z-10">
            <h1 class="text-6xl md:text-9xl font-bold text-yellow-300 mb-8 font-serif drop-shadow-[0_0_15px_rgba(253,224,71,0.5)] animate-pulse">
                Happy <br/> New Year!
            </h1>
            
            <div class="animate-bounce mt-12">
                <button onclick="openModal()" class="bg-gradient-to-r from-pink-600 to-purple-600 text-white px-10 py-5 rounded-full shadow-[0_0_20px_rgba(236,72,153,0.6)] hover:shadow-[0_0_30px_rgba(236,72,153,0.8)] hover:scale-110 transition-all flex items-center gap-3 font-bold text-xl mx-auto cursor-pointer border-2 border-white/20">
                    <i data-lucide="sparkles" class="w-6 h-6"></i> Let's Celebrate
                </button>
            </div>
        </div>
    </div>

    <!-- STAGE 2: MODAL (Wizard) -->
    <div id="view-modal" class="fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 hidden">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center relative overflow-hidden transform transition-all fade-in">
            <!-- Progress Dots -->
            <div class="flex justify-center gap-2 mb-6" id="modal-dots">
                <div class="h-2 w-8 bg-pink-500 rounded-full transition-all duration-300"></div>
                <div class="h-2 w-2 bg-pink-200 rounded-full transition-all duration-300"></div>
                <div class="h-2 w-2 bg-pink-200 rounded-full transition-all duration-300"></div>
            </div>

            <!-- Dynamic Content -->
            <div id="modal-content" class="min-h-[200px] flex flex-col items-center justify-center">
                <!-- Content injected via JS -->
            </div>

            <div class="mt-8 flex justify-center gap-4">
                <button id="modal-btn" onclick="nextModalStep()" class="bg-pink-500 text-white px-8 py-2.5 rounded-full font-medium hover:bg-pink-600 transition-colors flex items-center gap-2 shadow-md">
                    Next <i data-lucide="chevron-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- STAGE 3: CELEBRATION ROOM -->
    <div id="view-celebration" class="min-h-screen bg-gradient-to-b from-pink-50 to-white relative overflow-x-hidden pb-20 hidden">
        
        <!-- Layer: Balloons (Dynamic) -->
        <div id="balloons-container" class="fixed inset-0 pointer-events-none z-0"></div>
        
        <!-- Layer: Lights (Dynamic) -->
        <div id="lights-container" class="fixed top-0 left-0 right-0 z-20 pointer-events-none origin-top animate-swing hidden">
            <svg class="absolute top-0 left-0 w-full h-20 overflow-visible" preserveAspectRatio="none">
                <path d="M0,0 Q500,50 1000,0 T2000,0" stroke="#555" strokeWidth="2" fill="none" />
            </svg>
            <div id="bulbs-row" class="flex justify-between px-4 absolute top-0 w-full"></div>
        </div>

        <!-- Main Content Area -->
        <div class="container mx-auto px-4 py-8 relative z-10">
            <div class="text-center mb-10 mt-12">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2 font-serif">Let's Celebrate! üéâ</h1>
                <p class="text-gray-500">Customize our little party room below.</p>
            </div>

            <!-- Control Buttons -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-lg mx-auto mb-16">
                <button onclick="toggleDecor('lights')" id="btn-lights" class="p-4 rounded-xl border-2 bg-white text-gray-600 border-gray-200 hover:border-yellow-300 transition-all flex flex-col items-center gap-2 shadow-sm">
                    <i data-lucide="star" class="w-6 h-6"></i>
                    <span class="font-semibold" id="lbl-lights">Decorate</span>
                </button>

                <button onclick="toggleDecor('balloons')" id="btn-balloons" class="p-4 rounded-xl border-2 bg-white text-gray-600 border-gray-200 hover:border-blue-300 transition-all flex flex-col items-center gap-2 shadow-sm">
                    <i data-lucide="gift" class="w-6 h-6"></i>
                    <span class="font-semibold" id="lbl-balloons">Balloons</span>
                </button>
            </div>

            <!-- The Cake (Hidden by default) -->
            <div id="cake-container" class="flex justify-center mb-16 animate-bounce-soft hidden">
                <div class="relative text-8xl drop-shadow-2xl cursor-pointer hover:scale-110 transition-transform">
                    üéÇ
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -mt-4 flex gap-2">
                        <div class="w-1 h-4 bg-yellow-400 rounded-full animate-flicker"></div>
                        <div class="w-1 h-4 bg-yellow-400 rounded-full animate-flicker delay-75"></div>
                        <div class="w-1 h-4 bg-yellow-400 rounded-full animate-flicker delay-150"></div>
                    </div>
                </div>
            </div>

            <!-- Scroll Down Indicator -->
            <div class="flex flex-col items-center justify-center animate-bounce opacity-60 mb-12">
                <span class="text-pink-500 text-sm font-medium mb-1">Scroll for memories</span>
                <i data-lucide="chevron-down" class="text-pink-500 w-6 h-6"></i>
            </div>

            <!-- Quote Gallery -->
            <div class="max-w-4xl mx-auto px-4 mb-20">
                <div class="flex items-center gap-2 mb-6">
                    <i data-lucide="camera" class="text-pink-500 w-6 h-6"></i>
                    <h3 class="text-xl font-bold text-gray-800">Some Beautiful Quotes üì∏</h3>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-3 shadow-md rotate-[-2deg] hover:rotate-0 transition-transform duration-300 rounded-sm">
                        <div class="bg-gray-800 h-48 flex items-center justify-center text-white p-4 text-center font-serif italic text-sm">
                            "If not me, then who?"
                        </div>
                        <div class="mt-3 text-center font-handwriting text-gray-600">New Mindset üß†</div>
                    </div>
                    <div class="bg-white p-3 shadow-md rotate-[1deg] hover:rotate-0 transition-transform duration-300 rounded-sm">
                        <div class="bg-pink-100 h-48 flex items-center justify-center text-gray-800 p-4 text-center font-serif text-lg leading-relaxed">
                            This year, let your dreams be bigger than your fears.
                        </div>
                        <div class="mt-3 text-center font-handwriting text-gray-600">Dream Big ‚ú®</div>
                    </div>
                    <div class="bg-white p-3 shadow-md rotate-[-1deg] hover:rotate-0 transition-transform duration-300 rounded-sm">
                        <div class="bg-indigo-50 h-48 flex items-center justify-center text-gray-800 p-4 text-center text-sm">
                            "And now we welcome the new year. Full of things that have never been."
                        </div>
                        <div class="mt-3 text-center font-handwriting text-gray-600">Fresh Pages üìñ</div>
                    </div>
                </div>
            </div>

            <!-- Curtain Trigger Button (Bottom) -->
            <div class="text-center pb-24">
                <button onclick="openCurtain()" class="group relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white transition-all duration-200 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-full shadow-lg hover:shadow-xl hover:scale-105 focus:outline-none overflow-hidden cursor-pointer">
                    <span class="relative z-10 flex items-center gap-2">
                        üíå A New Year Message Awaits
                    </span>
                    <div class="absolute inset-0 bg-white/20 group-hover:translate-x-full transition-transform duration-500 ease-out -skew-x-12 origin-left"></div>
                </button>
            </div>
        </div>

        <!-- Floating Party Poppers -->
        <div class="fixed bottom-4 left-4 z-40 cursor-pointer transition hover:scale-110 active:scale-95" onclick="firePopper(event)">
            <div class="text-6xl animate-wiggle">üéâ</div>
            <p class="text-xs text-center font-bold text-pink-500 bg-white/80 rounded px-1 shadow-sm">Pop Me!</p>
        </div>
        <div class="fixed bottom-4 right-4 z-40 cursor-pointer transition hover:scale-110 active:scale-95" onclick="firePopper(event)">
            <div class="text-6xl animate-wiggle" style="transform: scaleX(-1);">üéâ</div>
            <p class="text-xs text-center font-bold text-pink-500 bg-white/80 rounded px-1 shadow-sm">Pop Me!</p>
        </div>
    </div>

    <!-- STAGE 4: CURTAIN OVERLAY -->
    <div id="curtain-overlay" class="fixed inset-0 z-50 flex items-center justify-center overflow-hidden hidden">
        <div id="curtain-left" onclick="slideCurtains()" class="absolute inset-y-0 left-0 w-1/2 bg-red-700 curtain-panel z-20 flex items-center justify-end pr-4 border-r-4 border-yellow-400 shadow-2xl cursor-pointer">
            <div class="text-yellow-400/20 text-9xl font-serif absolute left-10 select-none">2026</div>
        </div>
        
        <div id="curtain-right" onclick="slideCurtains()" class="absolute inset-y-0 right-0 w-1/2 bg-red-700 curtain-panel z-20 flex items-center justify-start pl-4 border-l-4 border-yellow-400 shadow-2xl cursor-pointer">
            <div class="text-yellow-400/20 text-9xl font-serif absolute right-10 select-none">2026</div>
        </div>

        <div id="curtain-hint" class="absolute z-30 pointer-events-none animate-pulse text-yellow-200 text-2xl font-bold drop-shadow-lg flex flex-col items-center gap-2">
            <div class="w-16 h-16 rounded-full bg-yellow-400/20 flex items-center justify-center border-2 border-yellow-400">üëÜ</div>
            Tap to Open
        </div>

        <div class="bg-[#fffdf0] p-8 md:p-12 max-w-2xl w-full mx-4 relative rounded-lg shadow-2xl text-center border-8 border-double border-gray-300">
            <div class="absolute top-4 left-4 text-3xl opacity-50 font-serif">‚ùù</div>
            <h2 class="text-2xl font-serif text-gray-800 mb-4 border-b pb-3 border-gray-200">
                To My Dearest‚ô•Ô∏è
            </h2>
            <div class="space-y-3 text-gray-600 font-serif text-sm leading-relaxed text-justify md:text-center">
                <p>As the new year begins, I just want to wish you calm, good health, and a heart that stays hopeful no matter what comes your way. May this year be gentle on you and give you enough strength to handle everything with calm and confidence.</p>
                <p>Take good care of yourself, eat well, rest properly, and don‚Äôt forget to give yourself time when you need it. Your health and happiness truly matter, and I hope every day ahead treats you kindly.</p>
                <p>My best wishes to your parents too. May the coming year bring them comfort, good health, and many reasons to smile.</p>
                <p>Keep believing in yourself and thinking positive, even on difficult days. Better times are always closer than they seem. Looking forward to meeting you soon and sharing more good moments in the year ahead.</p>
            </div>
            <div class="mt-6 pt-4 border-t border-gray-200">
                <p class="font-bold text-lg text-pink-600 font-handwriting">üåºHAPPY NEW YEARüåº</p>
            </div>
            <button onclick="closeCurtain()" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 p-2 text-xl font-bold cursor-pointer">‚úï</button>
        </div>
    </div>

    <div id="particle-container"></div>

    <script>
        lucide.createIcons();

        // --- Landing Page Fireworks Logic ---
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        let fwParticles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function createFirework(x, y) {
            const colors = ['#ff0044', '#ffdd00', '#00ccff', '#aa00ff', '#ffffff'];
            const count = 30; // particles per burst
            for(let i=0; i<count; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 3 + 1;
                fwParticles.push({
                    x: x,
                    y: y,
                    vx: Math.cos(angle) * speed,
                    vy: Math.sin(angle) * speed,
                    life: 1.0,
                    color: colors[Math.floor(Math.random() * colors.length)]
                });
            }
        }

        // Auto launch fireworks occasionally
        setInterval(() => {
            if (!document.getElementById('view-landing').classList.contains('hidden')) {
                createFirework(
                    Math.random() * canvas.width, 
                    Math.random() * (canvas.height * 0.6) // Top 60% of screen
                );
            }
        }, 800);

        function animateFireworks() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for(let i=0; i<fwParticles.length; i++) {
                let p = fwParticles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.05; // gravity
                p.life -= 0.02; // fade
                
                ctx.globalAlpha = p.life;
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 2, 0, Math.PI*2);
                ctx.fill();
            }
            
            // Remove dead particles
            fwParticles = fwParticles.filter(p => p.life > 0);
            
            requestAnimationFrame(animateFireworks);
        }
        animateFireworks();


        // --- Modal Logic ---
        let modalStep = 0;
        const modalContents = [
            { icon: 'üéâ', title: 'Happy New Year 2026!', text: "I'm so glad we made it to another year!" },
            { icon: 'ü•Ç', title: 'Ready for a fresh start?', text: "Are you ready to welcome 2026 with joy?" },
            { icon: 'üöÄ', title: 'Let\'s make it unforgettable!', text: "Let's create amazing memories this year." }
        ];

        function openModal() {
            document.getElementById('view-landing').classList.add('hidden');
            document.getElementById('view-modal').classList.remove('hidden');
            renderModalStep();
        }

        function renderModalStep() {
            const content = modalContents[modalStep];
            const html = `
                <div class="fade-in">
                    <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">${content.icon}</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">${content.title}</h2>
                    <p class="text-gray-500">${content.text}</p>
                </div>
            `;
            document.getElementById('modal-content').innerHTML = html;

            const dots = document.getElementById('modal-dots').children;
            for(let i=0; i<3; i++) {
                dots[i].className = i === modalStep 
                    ? 'h-2 w-8 bg-pink-500 rounded-full transition-all duration-300' 
                    : 'h-2 w-2 bg-pink-200 rounded-full transition-all duration-300';
            }

            const btn = document.getElementById('modal-btn');
            if (modalStep === 2) {
                btn.innerHTML = `Let's Go! <i data-lucide="party-popper" class="w-4 h-4 ml-2"></i>`;
                btn.className = "bg-rose-500 text-white px-8 py-2.5 rounded-full font-medium hover:bg-rose-600 transition-colors shadow-lg hover:scale-105 transform flex items-center";
                btn.onclick = startCelebration;
                lucide.createIcons(); 
            }
        }

        function nextModalStep() {
            if (modalStep < 2) {
                modalStep++;
                renderModalStep();
            }
        }

        function startCelebration() {
            document.getElementById('view-modal').classList.add('hidden');
            document.getElementById('view-celebration').classList.remove('hidden');
            toggleDecor('lights'); 
            const audio = document.getElementById('bgMusic');
            audio.play().catch(e => console.log("Auto-play blocked", e));
        }

        // --- Decorations Logic ---
        const activeDecor = { lights: false, balloons: false, cake: false };

        function toggleDecor(type) {
            activeDecor[type] = !activeDecor[type];
            if (type === 'lights') {
                const lightsContainer = document.getElementById('lights-container');
                const btn = document.getElementById('btn-lights');
                const lbl = document.getElementById('lbl-lights');
                const cake = document.getElementById('cake-container');
                
                if (activeDecor.lights) {
                    lightsContainer.classList.remove('hidden');
                    cake.classList.remove('hidden');
                    btn.classList.add('border-yellow-500', 'bg-yellow-50', 'text-yellow-600');
                    lbl.innerText = 'Hide Decor';
                    renderBulbs();
                } else {
                    lightsContainer.classList.add('hidden');
                    cake.classList.add('hidden');
                    btn.classList.remove('border-yellow-500', 'bg-yellow-50', 'text-yellow-600');
                    lbl.innerText = 'Decorate';
                }
            }
            if (type === 'balloons') {
                const btn = document.getElementById('btn-balloons');
                const lbl = document.getElementById('lbl-balloons');
                if (activeDecor.balloons) {
                    btn.classList.add('border-blue-500', 'bg-blue-50', 'text-blue-600');
                    lbl.innerText = 'Clear Balloons';
                    startBalloons();
                } else {
                    btn.classList.remove('border-blue-500', 'bg-blue-50', 'text-blue-600');
                    lbl.innerText = 'Fly Balloons';
                    stopBalloons();
                }
            }
        }

        function renderBulbs() {
            const container = document.getElementById('bulbs-row');
            if (container.children.length > 0) return;
            const colors = ['#ff5f5f', '#fbbf24', '#4ade80', '#60a5fa'];
            let html = '';
            for(let i=0; i<15; i++) {
                const color = colors[i % 4];
                const top = Math.sin(i) * 20 + 10;
                const delay = Math.random();
                html += `
                    <div class="relative" style="top: ${top}px">
                        <div class="w-3 h-3 rounded-full shadow-[0_0_10px_2px_rgba(255,255,0,0.5)] animate-flicker" 
                             style="background-color: ${color}; animation-delay: ${delay}s; animation-duration: 1.5s;">
                        </div>
                        <div class="w-[1px] h-3 bg-gray-600 mx-auto -mt-4"></div>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        let balloonInterval;
        function startBalloons() {
            const container = document.getElementById('balloons-container');
            balloonInterval = setInterval(() => {
                if (container.children.length > 30) container.removeChild(container.firstChild);
                const el = document.createElement('div');
                const colors = ['bg-red-500', 'bg-yellow-500', 'bg-blue-500', 'bg-purple-500', 'bg-pink-500', 'bg-green-500'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                const left = Math.random() * 100;
                const scale = 0.6 + Math.random() * 0.6;
                const duration = 5 + Math.random() * 5;
                const xDir = (Math.random() - 0.5) * 300;
                const rot = (Math.random() - 0.5) * 40;

                el.className = `absolute bottom-[-50px] w-8 h-10 rounded-full ${color} opacity-90 shadow-lg balloon-fly`;
                el.style.left = `${left}%`;
                el.style.setProperty('--scale', scale);
                el.style.setProperty('--duration', `${duration}s`);
                el.style.setProperty('--xDir', `${xDir}px`);
                el.style.setProperty('--rot', `${rot}deg`);
                el.innerHTML = `<div class="absolute bottom-[-10px] left-1/2 w-0.5 h-8 bg-gray-400 -translate-x-1/2 opacity-50"></div>`;
                container.appendChild(el);
            }, 600);
        }

        function stopBalloons() {
            clearInterval(balloonInterval);
            document.getElementById('balloons-container').innerHTML = '';
        }

        function openCurtain() {
            document.getElementById('curtain-overlay').classList.remove('hidden');
        }

        function closeCurtain() {
            document.getElementById('curtain-overlay').classList.add('hidden');
            document.getElementById('curtain-left').style.transform = 'translateX(0)';
            document.getElementById('curtain-right').style.transform = 'translateX(0)';
            document.getElementById('curtain-hint').classList.remove('hidden');
        }

        function slideCurtains() {
            document.getElementById('curtain-left').style.transform = 'translateX(-100%)';
            document.getElementById('curtain-right').style.transform = 'translateX(100%)';
            document.getElementById('curtain-hint').classList.add('hidden');
        }

        function firePopper(e) {
            const originX = e.clientX;
            const originY = e.clientY;
            const colors = ['#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#FF00FF', '#00FFFF'];
            const container = document.getElementById('particle-container');

            for (let i = 0; i < 50; i++) {
                const isLeft = originX < window.innerWidth / 2;
                const baseAngle = isLeft ? -45 : -135; 
                const spread = (Math.random() - 0.5) * 60;
                const angleRad = (baseAngle + spread) * (Math.PI / 180);
                
                const vx = Math.cos(angleRad) * (Math.random() * 20 + 10);
                const vy = Math.sin(angleRad) * (Math.random() * 20 + 10);
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                const p = document.createElement('div');
                p.className = 'particle w-2 h-2';
                p.style.backgroundColor = color;
                p.style.left = originX + 'px';
                p.style.top = originY + 'px';
                
                container.appendChild(p);

                let x = originX, y = originY, velX = vx, velY = vy, life = 1.0, decay = 0.01 + Math.random() * 0.02;

                function step() {
                    x += velX;
                    y += velY;
                    velY += 0.8; 
                    velX *= 0.95;
                    life -= decay;
                    p.style.left = x + 'px';
                    p.style.top = y + 'px';
                    p.style.opacity = life;
                    if (life > 0) requestAnimationFrame(step);
                    else p.remove();
                }
                requestAnimationFrame(step);
            }
        }
    </script>
</body>
</html>